app.directive("question",function(){return{restrict:"E",scope:{minValue:"=min",maxValue:"=max",unit:"@unit",question:"@question",result:"=result",charttemplate:"@charttemplate",color:"@color",source:"@source",sourcetitle:"@sourcetitle"},templateUrl:"templates/question.html",link:function(a,b,c,d){function g(b){a.clicked=!0,$(document).unbind("mousemove",h),e.unbind("click",g),e.addClass("clicked"),setTimeout(function(){a.showchart=!0,a.$apply()},800),a.$emit("valueSet",a.value),a.$apply()}function h(b){wh=$(window).height(),y=wh-b.pageY,perc=y/wh,delta=c.max-c.min,a.value=Math.round(delta*perc+c.min),f.css({height:y+"px"}),a.$apply()}var e=b,f=b.find(".slider"),c=c;$(document).on("mousemove",h),e.on("click",g),a.getNumber=function(a){return new Array(a)},a.pi_options={responsive:!1,maintainAspectRatio:!1,segmentShowStroke:!1,percentageInnerCutout:70,animationSteps:60,animationEasing:"easeOutQuart",animateRotate:!0,animateScale:!1,showTooltips:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},a.bar_options={scaleBeginAtZero:!0,scaleShowGridLines:!1,scaleGridLineColor:"#ffffff",scaleGridLineWidth:0,scaleShowHorizontalLines:!1,scaleShowVerticalLines:!1,scaleShowLabels:!1,barShowStroke:!1,barStrokeWidth:2,barValueSpacing:5,showTooltips:!1,barDatasetSpacing:20,showScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},a.chart_children=function(){var b=$("#chart_children"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:306e5,color:c,label:"Kinderfl\xfcchtlinge"},{value:294e5,color:"#2E2E2E",label:"Vollj\xe4hrige Fl\xfcchtlinge"}];pi_chart=new Chart(d).Doughnut(e,a.pi_options)},a.chart_bundeshaushalt=function(){var b=$("#chart_bundeshaushalt"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:243528e3,color:c},{value:3016e8,color:"#2E2E2E"}];chart_bundeshaushalt=new Chart(d).Doughnut(e,a.pi_options)},a.chart_unfinished=function(){var b=$("#chart_unfinished"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:45,color:c},{value:55,color:"#2E2E2E"}];chart_unfinished=new Chart(d).Doughnut(e,a.pi_options)},a.chart_deaths=function(){var b=$("#chart_deaths"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[1600]},{fillColor:c,strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[2e3]}]};chart=new Chart(d).Bar(e,a.bar_options)},a.chart_tax=function(){var b=$("#chart_tax"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[12e3]},{fillColor:c,strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[15300]}]};chart=new Chart(d).Bar(e,a.bar_options)}}}});