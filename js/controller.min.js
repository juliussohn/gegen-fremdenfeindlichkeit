var app=angular.module("gegen-fremdenfeindlichkeit",["mgo-angular-wizard","ngAnimate","countTo"]);app.controller("appCtrl",function(a,b,c,d){a.value=0,a.number=5,a.i=0,a.values=[],a.introStep=1,a.$on("valueSet",function(b,c){a.values.push(c),8==a.values.length}),a.nextIntroStep=function(){a.introStep=a.introStep+1},a.init=function(){a.is_touch_device=a.is_touch_device(),a.browser=a.getBrowser(),"Safari"==a.browser[0]&&a.browser[1]>8||"Chrome"==a.browser[0]&&a.browser[1]>40?(a.changeBrowser=!1,d.ga("send","event","Browser","allowed",a.browser[0]+"/"+a.browser[0])):(a.changeBrowser=!0,d.ga("send","event","Browser","not allowed",a.browser[0]+"/"+a.browser[0]))},a.is_touch_device=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}},a.getBrowser=function(){var b,a=navigator.userAgent,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],"IE "+(b[1]||"")):"Chrome"===c[1]&&(b=a.match(/\b(OPR|Edge)\/(\d+)/),null!=b)?b.slice(1).join(" ").replace("OPR","Opera"):(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),c[1]=parseInt(c[1]),c)},a.questions=[{min:0,max:100,result:51,unit:" %",question:"Wie viel Prozent der Fl\xfcchtlinge weltweit sind j\xfcnger als 18 Jahre?",color:"#A468BD",charttemplate:"templates/charts/children.html",source:"https://www.uno-fluechtlingshilfe.de/fluechtlinge/themen/fluechtlingskinder.html",value:40,sourcetitle:"Uno Fl\xfcchtlingshilfe \u2013 Oktober 2015"},{min:0,max:12,result:12,unit:" Monate",question:"Wie lang ist die durchschnittliche Bearbeitungsdauer f\xfcr einen Asylantrag in Deutschland?",color:"#52BE80",charttemplate:"templates/charts/application_duration.html",source:"http://www.welt.de/politik/deutschland/article145595071/So-wird-die-Dauer-von-Asylverfahren-verschleiert.html",value:5,sourcetitle:"Die Welt \u2013 August 2015"},{min:0,max:100,result:45,unit:" %",question:"Wie viele Asylantr\xe4ge blieben in Deutschland 2015 unbearbeitet?",color:"#16a086",charttemplate:"templates/charts/unfinished.html",source:"http://www.rp-online.de/politik/deutschland/asylantraege-unbearbeitet-bundesamt-fuer-fluechtlinge-im-rueckstand-aid-1.5381979",value:40,sourcetitle:"RP Online \u2013 September 2015"},{min:0,max:6,result:3,unit:" Monate",question:"Wie lange d\xfcrfen Fl\xfcchtlinge nach ihrer Ankunft nicht Arbeiten?",color:"#576474",charttemplate:"templates/charts/work.html",source:"http://www.proasyl.de/de/themen/basics/basiswissen/rechte-der-fluechtlinge/",value:2,sourcetitle:"Proasyl \u2013 Oktober 2015"},{min:0,max:4e3,result:3300,unit:" EUR",question:"Wie viel verdient Deutschland j\xe4hrlich an jedem in Deutschland wohnendem Ausl\xe4nder durch Steuern?",color:"#13DFA4",charttemplate:"templates/charts/tax.html",source:"http://www.badische-zeitung.de/fakten-check-deutschland-geht-es-immer-schlechter",value:1345,sourcetitle:"Badische Zeitung \u2013 Dezember 2014"},{min:100,max:600,result:243,unit:" Mio EUR",question:"Wie viel Geld vom Bundeshaushalt wurde 2015 f\xfcr das Bundesamt f\xfcr Migration und Fl\xfcchtlinge ausgegeben?",color:"#eb6f63",charttemplate:"templates/charts/bundeshaushalt.html",source:"http://www.bundeshaushalt-info.de/#/2015/soll/ausgaben/einzelplan.html",value:500,sourcetitle:"Bundeshaushalt \u2013 Oktober 2015"},{min:0,max:1e3,result:143,unit:" EUR",question:"Wie viel Geld bekommt ein Asylbewerber monatlich in einer Erstaufnahme-Einrichtung?",color:"#f39c11",charttemplate:"templates/charts/money.html",source:"http://www.spiegel.de/politik/deutschland/fluechtlinge-in-deutschland-antworten-zum-taschengeld-a-1048432.html",value:567,sourcetitle:"Spiegel \u2013 August 2015"},{min:0,max:2e3,result:2e3,unit:" Tote",question:"Wie viele Fl\xfcchtlinge starben 2015 bei der Flucht \xfcber das Mittelmeer?",color:"#2980B9",charttemplate:"templates/charts/deaths.html",source:"http://www.tagesspiegel.de/politik/ertrunkene-fluechtlinge-2015-schon-30-mal-mehr-tote-im-mittelmeer-als-im-vorjahreszeitraum/11664838.html",value:345,sourcetitle:"tagessschau.de \u2013 August 2015"}],a.toStep=function(b){c.wizard().goTo(b),a.questionNumber=parseInt(b.substr(2)),"q_0"==b&&(a.started=!0),"q_8"==b&&(a.showresults=!0)},a.getNumber=function(a){return new Array(a)},a.setValue=function(b,c){var e=a.questions[c];d.ga("send","event","Question","Frage "+(c+1),e.value),console.log(e.value),e.clicked=!0,setTimeout(function(){e.showchart=!0,a.$apply()},800)},a.cursorMousedown=function(a){$(a.currentTarget).addClass("mousedown")},a.changeValue=function(b,c){var d=a.questions[c];$(b.currentTarget).find(".cursor").css({top:b.pageY-30+"px",left:b.pageX-30+"px"}).removeClass("mouseNotMoved"),wh=$(window).height(),y=wh-b.pageY,perc=y/wh,delta=d.max-d.min,d.value=Math.round(delta*perc+d.min),d.slider_height=y},a.bar_options={scaleBeginAtZero:!0,scaleShowGridLines:!1,scaleGridLineColor:"#ffffff",scaleGridLineWidth:0,scaleShowHorizontalLines:!1,scaleShowVerticalLines:!1,scaleShowLabels:!1,barShowStroke:!1,barStrokeWidth:2,barValueSpacing:5,showTooltips:!1,barDatasetSpacing:20,showScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},a.pi_options={responsive:!1,maintainAspectRatio:!1,segmentShowStroke:!1,percentageInnerCutout:70,animationSteps:60,animationEasing:"easeOutQuart",animateRotate:!0,animateScale:!1,showTooltips:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},a.result_1=function(){var b=$("#result_1"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[1600]},{fillColor:c,strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[2e3]}]};chart=new Chart(d).Bar(e,a.bar_options)},a.chart_children=function(){var b=$("#chart_children"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:306e5,color:c,label:"Kinderfl\xfcchtlinge"},{value:294e5,color:"#2E2E2E",label:"Vollj\xe4hrige Fl\xfcchtlinge"}];pi_chart=new Chart(d).Doughnut(e,a.pi_options)},a.chart_bundeshaushalt=function(){var b=$("#chart_bundeshaushalt"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:243528e3,color:c},{value:3016e8,color:"#2E2E2E"}];chart_bundeshaushalt=new Chart(d).Doughnut(e,a.pi_options)},a.chart_unfinished=function(){var b=$("#chart_unfinished"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e=[{value:45,color:c},{value:55,color:"#2E2E2E"}];chart_unfinished=new Chart(d).Doughnut(e,a.pi_options)},a.chart_deaths=function(){var b=$("#chart_deaths"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[1600]},{fillColor:c,strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[2e3]}]};chart=new Chart(d).Bar(e,a.bar_options)},a.chart_tax=function(){var b=$("#chart_tax"),c=b.parents(".question").find(".slider").css("background-color"),d=b.get(0).getContext("2d"),e={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[12e3]},{fillColor:c,strokeColor:!1,highlightFill:c,highlightStroke:!1,data:[15300]}]};chart=new Chart(d).Bar(e,a.bar_options)},a.result_chart=function(b){var c=bar_options={scaleBeginAtZero:!0,scaleShowGridLines:!1,scaleGridLineColor:"#ffffff",scaleGridLineWidth:0,scaleShowHorizontalLines:!1,scaleShowVerticalLines:!1,scaleShowLabels:!0,barShowStroke:!1,barStrokeWidth:2,barValueSpacing:5,showTooltips:!1,barDatasetSpacing:10,showScale:!1,responsive:!1,maintainAspectRatio:!1};setTimeout(function(){var d=$(".result_chart"),e=a.questions[b].color,f=d.get(b).getContext("2d"),g={labels:[""],datasets:[{fillColor:"#ffffff",strokeColor:!1,highlightFill:e,highlightStroke:!1,data:[a.questions[b].value]},{fillColor:"#2980B9",strokeColor:!1,highlightFill:e,highlightStroke:!1,data:[a.questions[b].result]}]};chart=new Chart(f).Bar(g,c)},800)},a.refresh=function(){location.reload()}});